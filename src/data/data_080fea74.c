#include "gba/gba.h"
#include "global.h"
#include "motion.h"

void VBlankIntr(void);
void HBlankIntrDummy(void);
void VCountIntr(void);
void sio_08002a00(void);
void sio_08002a10(void);

typedef void (*intrFunc)(void);

// 0x080fea74
const s16 gSineTable[256] = {
    0x0000, 0x0006, 0x000C, 0x0012, 0x0019, 0x001F, 0x0025, 0x002B, 0x0031, 0x0038, 0x003E, 0x0044, 0x004A, 0x0050,
    0x0056, 0x005C, 0x0061, 0x0067, 0x006D, 0x0073, 0x0078, 0x007E, 0x0083, 0x0088, 0x008E, 0x0093, 0x0098, 0x009D,
    0x00A2, 0x00A7, 0x00AB, 0x00B0, 0x00B5, 0x00B9, 0x00BD, 0x00C1, 0x00C5, 0x00C9, 0x00CD, 0x00D1, 0x00D4, 0x00D8,
    0x00DB, 0x00DE, 0x00E1, 0x00E4, 0x00E7, 0x00EA, 0x00EC, 0x00EE, 0x00F1, 0x00F3, 0x00F4, 0x00F6, 0x00F8, 0x00F9,
    0x00FB, 0x00FC, 0x00FD, 0x00FE, 0x00FE, 0x00FF, 0x00FF, 0x00FF, 0x0100, 0x00FF, 0x00FF, 0x00FF, 0x00FE, 0x00FE,
    0x00FD, 0x00FC, 0x00FB, 0x00F9, 0x00F8, 0x00F6, 0x00F4, 0x00F3, 0x00F1, 0x00EE, 0x00EC, 0x00EA, 0x00E7, 0x00E4,
    0x00E1, 0x00DE, 0x00DB, 0x00D8, 0x00D4, 0x00D1, 0x00CD, 0x00C9, 0x00C5, 0x00C1, 0x00BD, 0x00B9, 0x00B5, 0x00B0,
    0x00AB, 0x00A7, 0x00A2, 0x009D, 0x0098, 0x0093, 0x008E, 0x0088, 0x0083, 0x007E, 0x0078, 0x0073, 0x006D, 0x0067,
    0x0061, 0x005C, 0x0056, 0x0050, 0x004A, 0x0044, 0x003E, 0x0038, 0x0031, 0x002B, 0x0025, 0x001F, 0x0019, 0x0012,
    0x000C, 0x0006, 0x0000, 0xFFFA, 0xFFF4, 0xFFEE, 0xFFE7, 0xFFE1, 0xFFDB, 0xFFD5, 0xFFCF, 0xFFC8, 0xFFC2, 0xFFBC,
    0xFFB6, 0xFFB0, 0xFFAA, 0xFFA4, 0xFF9F, 0xFF99, 0xFF93, 0xFF8D, 0xFF88, 0xFF82, 0xFF7D, 0xFF78, 0xFF72, 0xFF6D,
    0xFF68, 0xFF63, 0xFF5E, 0xFF59, 0xFF55, 0xFF50, 0xFF4B, 0xFF47, 0xFF43, 0xFF3F, 0xFF3B, 0xFF37, 0xFF33, 0xFF2F,
    0xFF2C, 0xFF28, 0xFF25, 0xFF22, 0xFF1F, 0xFF1C, 0xFF19, 0xFF16, 0xFF14, 0xFF12, 0xFF0F, 0xFF0D, 0xFF0C, 0xFF0A,
    0xFF08, 0xFF07, 0xFF05, 0xFF04, 0xFF03, 0xFF02, 0xFF02, 0xFF01, 0xFF01, 0xFF01, 0xFF00, 0xFF01, 0xFF01, 0xFF01,
    0xFF02, 0xFF02, 0xFF03, 0xFF04, 0xFF05, 0xFF07, 0xFF08, 0xFF0A, 0xFF0C, 0xFF0D, 0xFF0F, 0xFF12, 0xFF14, 0xFF16,
    0xFF19, 0xFF1C, 0xFF1F, 0xFF22, 0xFF25, 0xFF28, 0xFF2C, 0xFF2F, 0xFF33, 0xFF37, 0xFF3B, 0xFF3F, 0xFF43, 0xFF47,
    0xFF4B, 0xFF50, 0xFF55, 0xFF59, 0xFF5E, 0xFF63, 0xFF68, 0xFF6D, 0xFF72, 0xFF78, 0xFF7D, 0xFF82, 0xFF88, 0xFF8D,
    0xFF93, 0xFF99, 0xFF9F, 0xFFA4, 0xFFAA, 0xFFB0, 0xFFB6, 0xFFBC, 0xFFC2, 0xFFC8, 0xFFCF, 0xFFD5, 0xFFDB, 0xFFE1,
    0xFFE7, 0xFFEE, 0xFFF4, 0xFFFA,
};

// 0x080fec74
const intrFunc gIntrTableTemplate[14] = {
    VBlankIntr,   HBlankIntrDummy, VCountIntr,      HBlankIntrDummy, HBlankIntrDummy, HBlankIntrDummy, sio_08002a00,
    sio_08002a10, HBlankIntrDummy, HBlankIntrDummy, HBlankIntrDummy, HBlankIntrDummy, HBlankIntrDummy, HBlankIntrDummy,
};

const u32 SAVEDATA_MAGIC[4] = {
    0x20202020,
    0x0,
    0x0,
    0x0,
};

const u8 SAVEDATA_INTI[] = "INTI";

// 0x080fecc4
const s32 s32_080fecc4 = 0x0;
const s32 s32_080fecc8 = 0x10001;

const s32 s32_ARRAY_080feccc[4] = {
    0x500000,
    0x4500F0,
    0x6E00F0,
    0x310096,
};

const struct Coord Coord_080fecdc = {
    0x16000,
    0x42000,
};

const s32 s32_ARRAY_080fece4[2] = {
    0x3C0000,
    0x280000,
};

const u8 u8_ARRAY_080fecec[8] = {
    0x0e, 0x20, 0x2a, 0x2a, 0x20, 0x0e,
};

// 080fecf4
const u8 BlazinModes[51] = {
    0x0A, 0x04, 0x06, 0x04, 0x05, 0x06, 0x05, 0x06, 0x05, 0x06, 0x06, 0x04, 0x03, 0x03, 0x03, 0x03, 0x03,
    0x0B, 0x04, 0x06, 0x04, 0x05, 0x04, 0x05, 0x07, 0x05, 0x06, 0x06, 0x07, 0x04, 0x03, 0x03, 0x03, 0x03,
    0x0C, 0x04, 0x07, 0x04, 0x05, 0x04, 0x07, 0x04, 0x04, 0x05, 0x07, 0x05, 0x07, 0x07, 0x03, 0x03, 0x03,
};

// 080fed27
const u8 BlazinEXModes[45] = {
    0x10, 0x04, 0x06, 0x04, 0x05, 0x09, 0x05, 0x06, 0x09, 0x06, 0x06, 0x09, 0x09, 0x06, 0x09,
    0x05, 0x04, 0x10, 0x04, 0x09, 0x04, 0x05, 0x05, 0x06, 0x04, 0x06, 0x07, 0x09, 0x07, 0x09,
    0x06, 0x09, 0x05, 0x04, 0x10, 0x04, 0x07, 0x04, 0x04, 0x05, 0x09, 0x05, 0x07, 0x07, 0x04,
};

// 080fed54
const u16 u16_ARRAY_080fed54[3] = {
    0x907,
    0x904,
    0x705,
};

// 080fed5a
const u16 UnkBlaizinModes_080fed5a[5] = {
    0x4, 0x5, 0x6, 0x7, 0x9,
};

// 080fed64
const u16 u16_080fed64 = 0x11;

// 080fed66
const u16 u16_ARRAY_080fed66[33] = {
    0x000A, 0x0010, 0x000A, 0x000F, 0x000A, 0x000E, 0x000A, 0x000D, 0x000A, 0x000C, 0x000A,
    0x000B, 0x000A, 0x000C, 0x000A, 0x000D, 0x000A, 0x000E, 0x000A, 0x000F, 0x000A, 0x0010,
    0x000A, 0x0011, 0x000A, 0x000E, 0x0001, 0x000F, 0x0001, 0x0010, 0x0001, 0x0011, 0x0001,
};

const u8 u8_ARRAY_080feda8[16] = {
    0x15, 0x0E, 0x07, 0x00, 0xF9, 0xF2, 0xEB, 0xF2, 0xF9, 0x00, 0x07, 0x0E, 0x15, 0x00, 0x00, 0x00,
};

// 080fedb8
const struct Coord Coord_ARRAY_080fedb8[13] = {
    {0xFFFFD400, 0xFFFFF000}, {0xFFFFD100, 0xFFFFEC00}, {0xFFFFD000, 0xFFFFE900}, {0xFFFFCE00, 0xFFFFE400},
    {0xFFFFD000, 0xFFFFE100}, {0xFFFFD200, 0xFFFFDE00}, {0xFFFFD300, 0xFFFFD700}, {0xFFFFD200, 0xFFFFDE00},
    {0xFFFFD000, 0xFFFFE100}, {0xFFFFCE00, 0xFFFFE400}, {0xFFFFD000, 0xFFFFE900}, {0xFFFFD100, 0xFFFFEC00},
    {0xFFFFD400, 0xFFFFF000},
};

// 080fee20
const s32 s32_ARRAY_080fee20[3] = {
    0x4000,
    0x7000,
    0xA000,
};

// 080fee2c
const u8 BlazinFireballAngles[8] = {
    0x00, 0x33, 0x66, 0x9A, 0xCE, 0x00, 0x00, 0x00,
};

const u8 VolteelModes[34] = {
    0x0D, 0x04, 0x05, 0x07, 0x05, 0x04, 0x05, 0x07, 0x05, 0x05, 0x07, 0x08, 0x04, 0x08, 0x03, 0x03, 0x03,
    0x10, 0x05, 0x06, 0x05, 0x06, 0x09, 0x06, 0x09, 0x05, 0x09, 0x06, 0x06, 0x09, 0x06, 0x05, 0x06, 0x06,
};

const u8 VolteelEXModes[42] = {
    0x10, 0x04, 0x05, 0x07, 0x04, 0x05, 0x08, 0x05, 0x05, 0x07, 0x0A, 0x07, 0x08, 0x04,
    0x0A, 0x05, 0x0A, 0x10, 0x09, 0x05, 0x09, 0x06, 0x09, 0x06, 0x06, 0x09, 0x06, 0x05,
    0x06, 0x06, 0x05, 0x06, 0x05, 0x06, 0x04, 0x00, 0x05, 0x00, 0x06, 0x00, 0x07, 0x00,
};

const u16 unk_080fee80[3 + 5 + 4] = {
    0x0008, 0x0009, 0x000A, 0x0004, 0x0005, 0x0007, 0x0008, 0x000A, 0x0005, 0x0006, 0x0009, 0x0000,
};

// 080fee98
const u8 HellbatNearModes[34] = {
    0x0C, 0x05, 0x05, 0x05, 0x05, 0x06, 0x06, 0x06, 0x06, 0x07, 0x07, 0x07, 0x07, 0x03, 0x03, 0x03, 0x03,
    0x0D, 0x04, 0x04, 0x04, 0x08, 0x05, 0x05, 0x06, 0x06, 0x07, 0x07, 0x08, 0x08, 0x08, 0x03, 0x03, 0x03,
};

// 080feeba
const u8 HellbatFarModes[34] = {
    0x10, 0x05, 0x05, 0x05, 0x05, 0x06, 0x06, 0x06, 0x06, 0x07, 0x07, 0x07, 0x07, 0x09, 0x09, 0x09, 0x09,
    0x10, 0x04, 0x04, 0x04, 0x08, 0x05, 0x05, 0x06, 0x06, 0x07, 0x07, 0x08, 0x08, 0x08, 0x09, 0x09, 0x09,
};

const u16 u16_ARRAY_080feedc[6] = {
    0x4, 0x5, 0x6, 0x7, 0x8, 0x9,
};

const u8 TretistaModes[34] = {
    0x10, 0x05, 0x05, 0x05, 0x05, 0x06, 0x06, 0x06, 0x06, 0x05, 0x07, 0x07, 0x07, 0x08, 0x08, 0x08, 0x08,
    0x0B, 0x04, 0x04, 0x05, 0x05, 0x05, 0x05, 0x06, 0x06, 0x05, 0x07, 0x07, 0x03, 0x03, 0x03, 0x03, 0x03,
};

const u8 TretistaEXModes[34] = {
    0x10, 0x05, 0x05, 0x05, 0x05, 0x06, 0x06, 0x06, 0x06, 0x05, 0x07, 0x07, 0x07, 0x08, 0x08, 0x08, 0x08,
    0x10, 0x04, 0x04, 0x05, 0x05, 0x05, 0x05, 0x06, 0x06, 0x07, 0x07, 0x07, 0x09, 0x09, 0x09, 0x09, 0x09,
};

const u16 u16_ARRAY_080fef2c[6] = {
    0x4, 0x5, 0x6, 0x7, 0x8, 0x9,
};

const u8 CubitModes[34] = {
    0x0B, 0x04, 0x04, 0x04, 0x04, 0x06, 0x06, 0x06, 0x07, 0x07, 0x07, 0x07, 0x03, 0x03, 0x03, 0x03, 0x03,
    0x10, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x05, 0x05, 0x05, 0x05, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08,
};

const u8 CubitEXModes[46] = {
    0x10, 0x04, 0x04, 0x04, 0x04, 0x06, 0x06, 0x06, 0x07, 0x07, 0x07, 0x07, 0x09, 0x09, 0x09, 0x09,
    0x09, 0x10, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x05, 0x05, 0x05, 0x05, 0x08, 0x08, 0x08, 0x08,
    0x08, 0x08, 0x04, 0x00, 0x05, 0x00, 0x06, 0x00, 0x07, 0x00, 0x08, 0x00, 0x09, 0x00,
};

const struct Coord Coord_ARRAY_080fef88[5] = {
    {0x1400, 0x3C00}, {0x3100, 0x5E00}, {0x6600, 0x1C00}, {0x9B00, 0x5E00}, {0xB800, 0x3C00},
};

const u8 u8_ARRAY_080fefb0[4] = {0x3, 0x1, 0x1, 0x1};
const u8 u8_ARRAY_080fefb4[4] = {0x4, 0x1, 0x1, 0x1};

const u8 unk_080fefb8[24] = {
    0x0E, 0x20, 0x2A, 0x2A, 0x20, 0x0E, 0x10, 0x04, 0x04, 0x04, 0x04, 0x05,
    0x05, 0x05, 0x05, 0x05, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x00,
};

const u16 u16_ARRAY_080fefd0[3] = {4, 5, 6};

// 080fefd8
const ALIGNED(4) u8 Boss22Modes1[17] = {
    0x10, 0x04, 0x04, 0x04, 0x04, 0x05, 0x05, 0x05, 0x05, 0x06, 0x06, 0x06, 0x06, 0x07, 0x07, 0x07, 0x07,
};

const u8 Boss22Modes2[11] = {
    0x10, 0x04, 0x04, 0x05, 0x05, 0x06, 0x06, 0x06, 0x07, 0x07, 0x07,
};

// 080feff4
const u16 u16_ARRAY_080feff4[3] = {
    0x808,
    0x808,
    0x808,
};

const u16 u16_ARRAY_080feffa[5] = {
    4, 5, 6, 7, 8,
};

const struct Action Action_ARRAY_080ff004[4] = {
    {0x2, 0x19},
    {0x2, 0x19},
    {0x3, 0x19},
};

const ALIGNED(4) u8 u8_ARRAY_080ff00c[80] = {
    0x01, 0x01, 0x01, 0x00, 0x01, 0x01, 0x01, 0x00, 0x01, 0x01, 0x01, 0x00, 0x01, 0x01, 0x01, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xB5, 0x00, 0x00, 0x00, 0x4B, 0xFF, 0xFF, 0xFF,
    0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xB5, 0x00, 0x00, 0x00, 0xB5, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x4B, 0xFF, 0xFF, 0xFF, 0xB5, 0x00, 0x00, 0x00,
    0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x4B, 0xFF, 0xFF, 0xFF, 0x4B, 0xFF, 0xFF, 0xFF,
};

// 080ff05c
const struct Coord Coord_080ff05c = {0, -2048};

const ALIGNED(4) u8 StrMISS[] = "MISS";
const ALIGNED(4) u8 StrSEC[] = "SEC";
const ALIGNED(4) u8 StrCOMBO[] = "COMBO";
const ALIGNED(4) u8 StrPlusSEC[] = "+  SEC";

// 080ff080
const struct Coord Coord_ARRAY_080ff080[5] = {
    {0, 0}, {4096, 4096}, {-4096, 4096}, {4096, -4096}, {-4096, -4096},
};

const u8 u8_ARRAY_080ff0a8[100] = {
    0x16, 0x05, 0x19, 0x08, 0x11, 0x00, 0x0F, 0x04, 0x0D, 0x02, 0x0B, 0x18, 0x03, 0x12, 0x07, 0x14, 0x01,
    0x0C, 0x09, 0x10, 0x06, 0x15, 0x0E, 0x17, 0x0A, 0x13, 0x00, 0x00, 0x02, 0x0C, 0x00, 0x0C, 0x01, 0x0C,
    0x00, 0x0C, 0x01, 0x0C, 0x02, 0x0C, 0x01, 0x0C, 0x02, 0x0C, 0x00, 0x0C, 0x02, 0x0C, 0x00, 0x0C, 0x01,
    0x0C, 0x00, 0x04, 0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0xFF,
    0x00, 0xFA, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x05, 0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x00,
    0x01, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0xFF, 0x00, 0xF9, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xFF,
};

const u16 u16_ARRAY_080ff10c[6] = {
    0xc02, 0xc00, 0xc01, 0xc00, 0xc01, 0xc02,
};

const u16 u16_ARRAY_080ff118[6] = {
    0xc01, 0xc02, 0xc00, 0xc02, 0xc00, 0xc01,
};

const s32 s32_ARRAY_080ff124[6] = {
    1024, 1536, 256, -1024, -1536, -256,
};

const s32 s32_ARRAY_080ff13c[6] = {
    1280, 1536, 256, -1024, -1792, -256,
};

const struct Action ElfActions[3] = {
    /* nurse  */ {0x45, 0x00},
    /* animal */ {0x63, 0x00},
    /* hacker */ {0x81, 0x00},
};

// 080ff15c
const ALIGNED(4) u16 DefaultBGPalette[16] = {
    0x0000, 0xFFFF, 0xB9CE, 0x8421, 0xC21F, 0xABFF, 0xC3EC, 0x9E80,
    0xA110, 0xF3F3, 0xF68A, 0xD14A, 0xA8FC, 0x8537, 0x908D, 0xCEB5,
};
